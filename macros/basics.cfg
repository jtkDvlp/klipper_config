[gcode_macro HOME]
gcode:
  G28
  G90

[gcode_macro HOMED]
gcode:
  {% if not ('x' in printer.toolhead.homed_axes and 'y' in printer.toolhead.homed_axes and 'z' in printer.toolhead.homed_axes) %}
    HOME
  {% endif %}
  G90